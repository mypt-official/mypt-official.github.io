---
layout: post
title:  "ğŸ¤¦â€â™‚ï¸ startActivityForResultê°€ Deprecated ë˜ê³ ë‚œ í›„"
date:   2022-10-03 18:00:00 +0900
categories: [í”„ë¡œê·¸ë˜ë°]
---

# ğŸ¤¦â€â™‚ï¸ startActivityForResultê°€ Deprecated ë˜ê³ ë‚œ í›„

https://developer.android.com/training/basics/intents/result?hl=ko

ìœ„ì— ë§í¬ëŠ” Android Developer ê³µì‹ í™ˆí˜ì´ì§€ì˜ startActivityForResultì˜ í•´ê²°ì±…ì´ ìˆë‹¤.

ì•ˆì— ë‚´ìš©ì„ ë³´ë©´ deprecated ëœ ì´ìœ ì—ì„œëŠ” ê°„ë‹¨í•˜ê²Œ 2ê°€ì§€ë¡œ ì„¤ëª…í•˜ë©´.

1. AndroidX [Activity](https://developer.android.com/jetpack/androidx/releases/activity)ì™€ [Fragment](https://developer.android.com/jetpack/androidx/releases/fragment)ì— ë„ì…ëœ Activity Result API ì‚¬ìš©ì„ ì ê·¹ ê¶Œì¥.
2. ê²°ê³¼ë¥¼ ì–»ëŠ” Activityë¥¼ ì‹¤í–‰í•˜ëŠ” ë¡œì§ì„ ì‚¬ìš©í•  ë•Œ, ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ì™€ Activityê°€ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. (íŠ¹íˆ ì¹´ë©”ë¼ ê°™ì€ **ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì‘ì—…ì€ ì†Œë©¸ í™•ë¥ ì´ êµ‰ì¥íˆ ë†’ë‹¤.**)

ê°„í˜¹ê°€ë‹¤ ì›ë˜ startActivityForResult() ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ì‚¬ì§„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•´ì„œ ì•±ì„ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆê¸°ì— deprecatedë¥¼ ê²°ì •í•œ ê²ƒ ê°™ë‹¤.(ì•„ì‰½ê²Œ ëêµ¬ë¨¼ **ìŠ¤ì•¡í¬ë¦¬**)

#### êµ¬í˜„ë°©ë²•ì„ ì•Œì•„ë³´ë„ë¡ í•˜ì!

A -> ì‹¤í–‰í•˜ê³  ë„˜ê²¨ ë°›ì•„ì•¼í•  activity

B -> ë°ì´í„°ë¥¼ ê°€ê³µ í›„ ë³´ë‚´ì¤˜ì•¼í•  activity

1. Aì—ì„œ Bë¥¼ ì‹¤í–‰ í›„ ë°›ì•„ì˜¬ ë°ì´í„°ì™€ ì²˜ë¦¬ë¥¼ ì •ë¦¬í•´ì¤€ë‹¤.

```kotlin
//ActivityResultLauncher<T>ê°ì²´ë¥¼ ìƒì„±í•´ì£¼ê³  ì´ˆê¸°í™” í•´ì¤€ë‹¤.
//TëŠ” ë‚´ê°€ í˜¸ì¶œí•  ì—‘í‹°ë¹„í‹°ì—ì„œ ê²°ê³¼ê°’ìœ¼ë¡œ ë°›ì•„ì˜¬ ìë£Œí˜•ì„ ë§í•œë‹¤.
lateinit var activityResultLauncher: ActivityResultLauncher<Intent>

override fun onCreate(savedInstanceState: Bundle?) {
  super.onCreate(savedInstanceState)
  ...

  binding.button.setOnSingleClickListener {
    activityResultLauncher.launch(Intent(
      this@AActivity,
      BActivity::class.java))
  }
  // RegisterActivityResult(Contract ìë£Œí˜•, ì½œë°±ë©”ì„œë“œ)ë¥¼ ì´ìš©í•´ì„œ
  // ActivityResultLauncher ì´ˆê¸°í™” í•´ì¤€ë‹¤.
  activityResultLauncher =
  registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { //Result ë§¤ê°œë³€ìˆ˜ ì½œë°± ë©”ì„œë“œ
    
    // ActivityResultLauncher<T>ì—ì„œ Të¥¼ intent ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ
    // intent ìë£Œí˜•ì„ Result ë§¤ê°œë³€ìˆ˜(ì½œë°±)ë¥¼ í†µí•´ ë°›ì•„ì˜¨ë‹¤
    // ì—‘í‹°ë¹„í‹°ì—ì„œ ë°ì´í„°ë¥¼ ê°–ê³ ì™”ì„ ë•Œë§Œ ì‹¤í–‰
    if (it.resultCode == RESULT_OK) { // RESULT_OK = -1
      // ConditionsActivity ì—ì„œ ê°–ê³ ì˜¨ Intent(It)
      val myData: Intent? = it.data
      val address = it.data?.getStringExtra("KEY1") ?: ""
    }
  }
}
```



2. Bì—ì„œ ë³´ë‚´ì¤„ ë°ì´í„°ë¥¼ setResultë¡œ ë³´ë‚´ì¤€ë‹¤.

```kotlin
val intent = Intent(applicationContext, AActivity::class.java).apply {
  // ì—‘í‹°ë¹„í‹°ì—ì„œ ê°–ê³ ì˜¬ ë°ì´í„°
  putExtra("KEY1", "any data")
  // ë°ì´í„° ì „ë‹¬ì´ ì„±ê³µí–ˆì„ ë•Œì˜ ë³€ìˆ˜ ê°’ ì €ì¥
  // Result_ok = -1 ì¼ ë•Œ ì—‘í‹°ë¹„í‹°ì— ì „ë‹¬ëœë‹¤.
}
setResult(RESULT_OK, intent) // ë°ì´í„°ë¥¼ ë‹´ì•„ë†“ê³  finish() í•˜ê²Œ ë˜ë©´ AActivity registerForActivityResultì— ë“¤ì–´ê°„ë‹¤.
finish()
```



ì´ëŸ° ì‹ìœ¼ë¡œ ê°„ë‹¨í•˜ê³  ì•ˆì „í•˜ê²Œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ê³  í•  ìˆ˜ ìˆë‹¤.

Deprecated ë˜ëŠ” ë¶€ë¶„ë“¤ì„ í•˜ë‚˜ ì”© ì •ë¦¬í•´ë‘¬ì•¼ ì˜ˆì „ ì½”ë“œë“¤ì„ ë‹¤ì‹œ ë´¤ì„ ë•Œ ìˆ˜ì •í•˜ê¸° êµ‰ì¥íˆ ì‰½ê³  ìš©ì´í•˜ë‹¤.
