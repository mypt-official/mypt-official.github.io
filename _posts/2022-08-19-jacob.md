---
layout: post
title:  "ğŸ›  ì‚¬ìš©ìë“¤ì´ ì•±ì„ ì ì‹œ ëª» ì“°ê²Œ í•  ìˆ˜ ìˆë‚˜? - Firebase Remote Config"
date:   2022-08-19 20:00:00 +0900
categories: [í”„ë¡œê·¸ë˜ë°]
---


# ğŸ› Â ì‚¬ìš©ìë“¤ì´ ì•±ì„ ì ì‹œ ëª» ì“°ê²Œ í•  ìˆ˜ ìˆë‚˜? - Firebase Remote Config

ì˜¤ëŠ˜ì€ íŒŒì´ì–´ë² ì´ìŠ¤ì˜ remote configë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤.

í•„ìëŠ” ì•±ì„ ê¼­ ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì´ ê²ƒì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.

ì¼ë‹¨ Firebaseì˜ Remote Configë€ **ì•±ì—ì„œ ë³„ë„ì˜ ì—…ë°ì´íŠ¸ë¥¼ í•˜ì§€ ì•Šì•„ë„ ì•±ì˜ ë™ì‘ì´ë‚˜ ëª¨ì–‘ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤**ì´ë‹¤.

ë§Œì•½ í•„ìì™€ ê°™ì€ ë²„ì „ ì²´í¬ë¥¼ í•˜ì—¬ ì•±ì„ ê°•ì œ ì—…ë°ì´íŠ¸í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤ëŠ” ì „ì œí•˜ì— ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë³´ê² ë‹¤.

**ì¼ë‹¨ firebaseì™€ ë‚´ ì•±ì´ ì—°ê²°ë˜ì–´ ìˆë‹¤ëŠ” ì „ì œí•˜ì— ì§„í–‰í•˜ê² ë‹¤.**

(ì¶”í›„ ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ ì‘ì„±í•  ì˜ˆì •)

1. gradleì— `implementation` ì‹œí‚¨ë‹¤.

```kotlin
implementation 'com.google.firebase:firebase-core:21.1.0'
implementation 'com.google.firebase:firebase-config-ktx:21.1.1'
```

1. Firebase Remote config instance í˜¸ì¶œí•œë‹¤.

```kotlin
val firebaseRemoteConfig = FirebaseRemoteConfig.getInstance()
```

1. listenerë¥¼ ë‹¨ë‹¤.

```kotlin
firebaseRemoteConfig.fetch(0/*ëª‡ì´ˆì— í•œ ë²ˆ í˜¸ì¶œí•  ê²ƒì¸ì§€.*/).addOnCompleteListener { task ->
    if (task.isSuccessful) {
        firebaseRemoteConfig.fetchAndActivate()
        val nowVersion = funGetAppVersion() // Version from gradle(app)
        val firebaseVersion = firebaseRemoteConfig.getString("version") // Version from firebase (firebase ì—ì„œ ì„¤ì •í•œ key ë¥¼ ê°€ì ¸ì˜´)
        val firebaseUpdate = firebaseRemoteConfig.getString("isUpdate") // from firebase (firebase ì—ì„œ ì„¤ì •í•œ key ë¥¼ ê°€ì ¸ì˜´)
     
        if (nowVersion == firebaseVersion || firebaseVersion.isBlank() || firebaseUpdate != "update") {
            launchApp()
            return@addOnCompleteListener
        } else if (nowVersion != firebaseVersion && firebaseUpdate == "true") { 
						// ì•± ë²„ì „ì´ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš° ë„ê³ , ì—…ë°ì´íŠ¸ê°€ í•„ìˆ˜ë©´ í”Œë ˆì´ìŠ¤í† ì–´ë¡œ ì´ë™
            openGoPlayStoreDialog()
            return@addOnCompleteListener
        }
    } else {
				// remote config í˜¸ì¶œì´ ì‹¤íŒ¨ í–ˆì„ ë•Œì—ë„ ì‹¤í–‰ì€ ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.
        launchApp()
    }
}

private fun funGetAppVersion(): String { 
				// gradle(app)ì—ì„œ ì„¤ì •í•œ versionName ì½ì–´ì˜¤ëŠ” ê²ƒ
        val packageManager = this.packageManager
        return packageManager.getPackageInfo(
            this.packageName, PackageManager.GET_ACTIVITIES
        ).versionName
    }
```

1. firebase remote configì— ë“¤ì–´ê°€ì„œ ìœ„ì— ì„¤ì •í•œ key ê°’ì„ ì„¸íŒ…í•´ì¤€ë‹¤.

[Firebase Remote Config | Customize your app on the fly](https://firebase.google.com/products/remote-config?gclid=Cj0KCQjwxveXBhDDARIsAI0Q0x0XJ44qxMQ8LGfSiD75J5sV-eqPjesZmpfTp0bZ2JI74KqWjn95fbIaAj2IEALw_wcB&gclsrc=aw.ds)

![example1](/images/jacob/example1.png)

ì´ë ‡ê²Œ í•˜ë©´ ì„¤ì •ì´ ì•±ì„ ê°•ì œ ì—…ë°ì´íŠ¸ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

ê°„ë‹¨í•˜ì§€ë§Œ ì²˜ìŒì— í–ˆì„ ë•Œ key ê°’ì„ ë‹¤ë¥´ê²Œ ì ì–´ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì•˜ê³  

ì´ì œ ê°•ì œ ì—…ë°ì´íŠ¸ë¥¼ ì œê±°í•´ì•¼í•˜ëŠ” ìƒí™©ì—ì„œ ê¹œë¹¡í•˜ê³  ì œê±°í•˜ì§€ ì•Šìœ¼ë©´ í° ë‚­íŒ¨ë¥¼ ë³´ê¸°ì— ë°°í¬ì™€ ì‹¬ì‚¬, ê°•ì œ ì—…ë°ì´íŠ¸ ì œê±°ë¥¼ í•  ë•Œ ì‹ ê²½ì„ ì˜ ì¨ì¤˜ì•¼í•œë‹¤.