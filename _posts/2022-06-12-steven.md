---
layout: post
title:  "PreferenceKeyë¡œ ë¶€ëª¨ ë·°ì— ê°’ ì „ë‹¬í•˜ê¸° (SwiftUI)"
date:   2022-06-12 23:10:00 +0900
categories: [í”„ë¡œê·¸ë˜ë°]
---

# PreferenceKeyë¡œ ë¶€ëª¨ ë·°ì— ê°’ ì „ë‹¬í•˜ê¸° (SwiftUI)

SwiftUIì—ì„  ìƒìœ„ ë·°ë¡œ ê°’ì„ ì „ë‹¬í•˜ê¸° ìœ„í•´ ë°”ì¸ë”©(@Binding) ë˜ëŠ” @EnvironmentObjectë¥¼ í™œìš©í•œë‹¤. ë‹¤ë§Œ ë°”ì¸ë”©ì´ë‚˜ @EnvironmentObjectëŠ” ìƒìœ„ ë·°ê°€ ì•Œê²Œ í•˜ê¸° ìœ„í•´ì„  @State ë˜ëŠ” @Publishedë¡œ ë˜í•‘ëœ ê°’ì„ ë³€ê²½í•´ì•¼ í•˜ëŠ”ë° ì´ ê²½ìš° ë·°ê°€ ë¦¬í”„ë ˆì‹œ ë˜ë¯€ë¡œ ì‹¤ì œ ë·°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ í†µì‹ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹Œ ì´ìƒ ì‚¬ìš©í•˜ê¸° í˜ë“¤ë‹¤.

ì´ ê²½ìš°ì—” PreferenceKeyë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒìœ„ ë·°ë¡œ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

## 1. PreferenceKey í”„ë¡œí† ì½œì„ ë”°ë¥´ëŠ” ê°ì²´ ìƒì„±í•˜ê¸°

PreferenceKeyëŠ” í”„ë¡œí† ì½œë¡œ defaultValueì™€ reduce(value:nextValue:)ë¥¼ êµ¬í˜„í•´ì£¼ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```swift
struct TextPreferenceKey: PreferenceKey {
    static var defaultValue: String = ""
    static func reduce(value: inout String, nextValue: () -> String) {
        value = nextValue()
    }
}
```

## 2. ìƒìœ„ ë·°ë¡œ ê°’ì„ ì „ë‹¬í•˜ê¸°

```swift
struct ParentView: View {
    var body: some View {
        ChildView()
            .onPreferenceChange(TextPreferenceKey.self) { value in
                print(value) // "ğŸ‹ï¸â€â™€ï¸ğŸ˜"ë¥¼ ì¶œë ¥í•œë‹¤
            }
    }
}

struct ChildView: View {
    var body: some View {
        Text("ë¡œë“œë  ë•Œ Preference Keyë¥¼ ì„¤ì •í•˜ëŠ” ë·°")
            .preference(key: TextPreferenceKey.self, value: "ğŸ‹ï¸â€â™€ï¸ğŸ˜")
    }
}
```

ìƒìœ„ ë·°ì—ì„  onPreferenceChangeë¥¼ í†µí•´ PreferenceKeyë¥¼ ê´€ì°°í•  ìˆ˜ ìˆë‹¤. í•˜ìœ„ ë·°ì—ì„  preference ìˆ˜ì •ìë¥¼ ì´ìš©í•´ PreferenceKeyë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

## 3. í™œìš©

ë‹¤ìŒì€ ì¼ë°˜ì ì¸ í™œìš© ë°©ì•ˆì´ë‹¤.

- ë‚´ë¹„ê²Œì´ì…˜ íƒ€ì´í‹€ì„ í•˜ìœ„ ë·°ì—ì„œ ì„¤ì •í•  ë•Œ

- ìŠ¤í¬ë¡¤ë·°ì˜ ì½˜í…ì¸  ì˜¤í”„ì…‹ì„ ìƒìœ„ ë·°ì—ì„œ ì‚¬ìš©í•  ë•Œ
- GeometryReaderë¥¼ ì‚¬ìš©í•´ ë·°ì˜ ì‚¬ì´ì¦ˆë¥¼ ìƒìœ„ ë·°ë¡œ ì „ë‹¬í•  ë•Œ

### ì°¸ê³ 

- https://swiftwithmajid.com/2020/01/15/the-magic-of-view-preferences-in-swiftui/

- https://velog.io/@kipsong/SwiftUI-Preference-Key-coordinatespace

- https://swiftontap.com/preferencekey
